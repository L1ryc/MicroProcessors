; Cyril John Christian A. Calo
; Practice from Van Patiluna lecture on i/o interfacing using 8255

DATA SEGMENT
   PORTA EQU 0F0H
   PORTB EQU 0F2H
   PORTC EQU 0F4H
   PORT_CON EQU 0F6H
DATA ENDS

CODE SEGMENT PUBLIC 'CODE'
      ASSUME CS:CODE, DS:DATA
START:
   ;PROGRAM 8255(PORTA AND PORTB AS OUPUT, PORTC AS INPUT, MODE 0)
   MOV DX, PORT_CON
   MOV AL, 89H
   OUT DX, AL
   ; DISPLAY 0 IN PORTB
   MOV DX, PORTB
   MOV AL, S_SEG[0]
   OUT DX, AL
THERE:
   ; CEHCK PUSH BUTTON SWITCH
   MOV DX, PORTC
   IN AL, DX
   TEST AL, 01H
   JZ THERE
   ; READ DAT FROM DIP SWITCH
   MOV DX, PORTC
   IN AL, DX
   MOV CL, 4
   SHR AL, CL
   ; DISPLAY DATA FROM DIP SWITCH TO LED
   MOV DX, PORTA
   OUT DX, AL
   ;DECODE DAT IN PORTC (DATA IN AL)
   MOV AH, 00H
   MOV SI, AX
   MOV AL, S_SEG[SI]
   ; DISPLAY TO 7 SEG DISPLAY IN PORTB
   MOV DX, PORTB
   OUT DX, AL
   JMP THERE
   
S_SEG DB 00111111B;0
      DB 00000110B;1
      DB 01011011B;2
      DB 01001111B;3
      DB 01100110B;4
      DB 01101101B;5
      DB 01111101B;6
      DB 00000111B;7
      DB 01111111B;8
      DB 01100111B;9
CODE ENDS
END